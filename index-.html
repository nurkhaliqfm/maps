<!DOCTYPE html>
<html>
  <head>
    <title>Add Map</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <!--main css-->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCUgmfDS3Dc4FmRguXbK_Wmqe9oZOIFoSY&callback=initMap&libraries=&v=weekly"></script>
  </head>
  <body>

    <div class="container"><br>
    <h2 style="text-align: center;">Formulir Pendaftaran Mitra Usaha <br>PANGOJE'</h2>
    <form action="user_act.php" method="post" enctype="multipart/form-data">
      <div class="form-group">
        <label>Nama warung/Toko :</label>
        <input type="text" class="form-control" placeholder="Masukkan Nama warung/Toko" name="namawarung" required="required">
      </div>
      <div class="form-group">
        <label>Hari Buka warung/Toko :</label>
        <input type="text" class="form-control" placeholder="Masukkan Hari Buka warung/Toko" name="haribuka" required="required">
      </div>
      <div class="form-group">
        <label>Jam Buka Warung/Toko :</label>
        <input type="text" class="form-control" placeholder="Masukkan Jam Buka Warung/Toko" name="jambuka" required="required">
      </div>
      <div class="form-group">
        <label>Nama Pemilik :</label>
        <input type="text" class="form-control" placeholder="Masukkan Nama Pemilik Warung/Toko" name="nama" required="required">
      </div>
      <div class="form-group">
        <label>Nomor Telepon :</label>
        <input type="number" class="form-control" placeholder="Masukkan Nomor Telepon" name="nohp" required="required">
      </div>
      <div class="form-group">
        <label>Nomor WA :</label>
        <input type="number" class="form-control" placeholder="Masukkan Nomor WA" name="nowa" required="required">
      </div><div class="form-group">
        <label>Alamat Email :</label>
        <input type="text" class="form-control" placeholder="Masukkan Alamat Email" name="email" required="required">
      </div>
      <div class="form-group">
        <label>Alamat Lengkap Warung/Toko :</label>
        <textarea class="form-control" name="alamatwarung" placeholder="sertakan Nama Desa, Kecamatan dan Kabupaten" required="required"></textarea>
      </div><br><br>
      





      <div class="row"> <!-- class row digunakan sebelum membuat column  -->
            <div class="col-0"> <!-- ukuruan layar dengan bootstrap adalah 12 kolom, bagian kiri dibuat sebesar 4 kolom-->
                <div class=""> <!-- untuk membuat semacam container berwarna abu -->
                <h1></h1>
                <hr>
                    <!-- <form action="user_act.php" method="post">
                        <div class="form-group">
                            <label for="exampleFormControlInput1">Latitude, Longitude</label>
                            <input type="text" class="form-control" id="latlong" name="latlong">
                        </div>
                                           
                        <div class="form-group">
                            <button type="submit" class="btn btn-info">Add</button>
                        </div>

                    </form>
 -->
                </div>
            </div>
            <div class="col-12"> <!-- ukuruan layar dengan bootstrap adalah 12 kolom, bagian kiri dibuat sebesar 4 kolom-->
                <!-- peta akan ditampilkan dengan id = mapid -->
                <div id="mapid"></div>
            </div>
        </div>



      <br><br><br><br><br><br><br><br><br><br><br><br><br>

        <!-- <div align="center" id="bisa"  class="container">
          <div class="jumbotron"> --> <!-- untuk membuat semacam container berwarna abu -->
                
                    <!-- <form action="user_act.php" method="post">
                        <div class="form-group">
                            <label for="exampleFormControlInput1">Latitude, Longitude</label>
                            <input type="text" class="form-control" id="latlong" name="latlong">
                        </div> 
                                           
                        <div class="form-group">
                            <button type="submit" class="btn btn-info">Add</button>
                        </div> 

                    </form>
            </div>
          </div> -->

          <div style="text-align: center;  position: center;" id="titik" class="form-group">
                <label for="exampleFormControlInput1">Pilih Titik lokasi Warung</label>
                <input type="text" class="form-control" id="latlong" name="latlong">
        </div> <br><br><br><br><br>
      <!-- <div class="form-group">
        <label>Titik Lokasi Warung/Toko :</label>
        <textarea class="form-control" name="titiklokasi" required="required"></textarea>
      </div> -->
      <div class="form-group">
        <label>Foto KTP:</label>
        <input type="file" name="foto" required="required">
        <p style="color: green">Ekstensi yang diperbolehkan .png | .jpg | .jpeg | .gif</p>
      </div><br>
      <div class="form-group">
        <h5><br>Dengan demikian, saya setuju bahwa PANGOJE' dapat mengumpulkan, menggunakan, dan mengungkapkan informasi yang saya berikan, atas nama perusahaan pemohon, sesuai dengan Pemberitahuan Privasi PANGOJE' yang telah saya baca dan pahami.</h5>
      </div><br>      
      <input type="submit" name="" value="Simpan" class="btn btn-primary">

      <div>
        <?php 
        include 'maps/index.html';
         ?>
      </div>
    </form>
  </div><br><br><br><br>













    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="googleMap"></div>

    <!--main js-->
    <script src="main.js">

      <?php
        
        $mysqli = mysqli_connect('localhost', 'root', '', 'tutorial');   //koneksi ke database
        $tampil = mysqli_query($mysqli, "SELECT * from lokasi"); //ambil data dari tabel lokasi
        while($hasil = mysqli_fetch_array($tampil)){ ?> //melooping data menggunakan while

        //menggunakan fungsi L.marker(lat, long) untuk menampilkan latitude dan longitude
        //menggunakan fungsi str_replace() untuk menghilankan karakter yang tidak dibutuhkan
        L.marker([<?php echo str_replace(['[', ']', 'LatLng', '(', ')'], '', $hasil['lat_long']); ?>]).addTo(mymap)

                //data ditampilkan di dalam bindPopup( data ) dan dapat dikustomisasi dengan html
                .bindPopup(`<?php echo 'nama tempat:'.$hasil['nama_tempat'].'|kategori:'.$hasil['kategori'].'|keteragan:'.$hasil['keterangan']; ?>`)


    </script>
  </body>
</html>